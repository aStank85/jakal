# Jakal V0.1 - Release Notes

## Overview
Initial MVP release of Jakal, a Rainbow Six Siege stats analyzer that tracks, analyzes, and compares player performance.

## What's Included

### Core Features
- **R6 Tracker Stats Import**: Copy-paste stats directly from R6 Tracker season drawer
- **SQLite Database**: Persistent storage for player stats and computed metrics
- **Advanced Metrics Calculation**: Derived stats including entry efficiency, clutch success rates, teamplay index
- **Role Detection System**: Automatically identifies player roles (Fragger, Entry, Support, Anchor, Clutch Specialist, Carry)
- **Multi-Player Comparison**: Side-by-side stat comparison with winner detection

### Architecture
```
src/
├── parser.py       - State machine parser for R6 Tracker stats
├── database.py     - SQLite operations with error handling
├── calculator.py   - Metrics computation and role classification
├── comparator.py   - Player comparison logic
└── ui.py          - Terminal UI with input validation
```

### Database Schema
- **players**: Player records with unique usernames
- **stats_snapshots**: Historical stat snapshots (supports multiple snapshots per player)
- **computed_metrics**: Derived metrics and role classifications

## Recent Improvements

### Bug Fixes
1. **Database Field Mapping** - Fixed inconsistencies between parser output and database expectations:
   - `rounds.played` → `rounds.rounds_played`
   - `rounds.wins/losses` → `rounds.rounds_wins/rounds_losses`
   - Moved `rank_points`, `max_rank_points`, `trn_elo` from `ranked` to `uncategorized` section

2. **Implemented Missing Method** - Added `Database.add_computed_metrics()` to persist calculated metrics

### Enhancements
1. **Input Validation** - Added comprehensive validation to UI:
   - Username: Minimum 2 characters
   - Date: YYYY-MM-DD format with validity check
   - Time: HH:MM format validation
   - Season: Format validation (e.g., Y10S4)
   - Player selection: Range checking, duplicate detection, minimum selection enforcement

2. **Error Handling** - Added try-except blocks to all database operations:
   - Connection errors
   - Query failures
   - Transaction rollback on errors
   - Descriptive error messages

3. **Documentation**:
   - Comprehensive README.md with usage guide
   - Project structure documentation
   - Installation instructions
   - Database schema documentation

4. **Testing** - Added pytest-compatible unit tests:
   - `tests/test_parser.py`: 20+ tests for parser functionality
   - `tests/test_calculator.py`: 15+ tests for metrics calculations
   - Edge case coverage (division by zero, empty data, etc.)

## Technical Details

### Metrics Formulas

**Entry Efficiency**
```
first_bloods / (first_bloods + first_deaths)
```

**Aggression Score**
```
(first_bloods + first_deaths) / rounds_played
```

**Clutch Success Rate**
```
clutch_wins / (clutch_wins + clutch_losses)
```

**Teamplay Index**
```
assists / (assists + kills)
```

**Role Scores** - Weighted combinations of stats:
- Fragger: K/D (30) + KPR (40) + FB_Rate (300)
- Entry: Entry_Efficiency (40) + Aggression (60)
- Support: APR (150) + Teamplay (50)
- Anchor: Clutch_Rate (40) + 1v1_Success (40) + Survival (20)
- Clutch: CPR (100) + 1v1_Success (30) + Disadvantaged_Success (70)
- Carry: K/D (25) + Win% (0.3) + KPR (30) + Clutch (20)

### Dependencies
- Python 3.7+ (standard library only)
- No external packages required for core functionality
- Optional: pytest for running tests

## Known Limitations

1. **Parser Specificity** - Only works with R6 Tracker's current format
2. **Terminal Only** - No GUI or web interface
3. **Manual Import** - Requires copy-paste from R6 Tracker
4. **No Historical Analysis** - Can't track progression over time (snapshots stored but not analyzed)
5. **No Visualization** - Stats displayed as text tables only

## Future Roadmap

### Planned Features
- [ ] Player progression tracking (compare snapshots over time)
- [ ] Export to CSV/JSON
- [ ] Graphs and charts for visualization
- [ ] Web interface
- [ ] Operator-specific stats
- [ ] Map performance analysis
- [ ] Team composition recommendations
- [ ] R6 Tracker API integration (if available)

### Potential Enhancements
- [ ] Seasonal comparison
- [ ] Rank prediction based on stats
- [ ] Benchmark against rank averages
- [ ] Play style recommendations
- [ ] Custom metric creation

## Testing

Run tests with:
```bash
# Install pytest (optional)
pip install pytest pytest-cov

# Run all tests
pytest tests/

# Run with coverage
pytest --cov=src tests/
```

## Usage Example

```bash
# Start the application
python main.py

# Select option 1 - Add new stats
# Copy stats from R6 Tracker
# Paste and type END
# Enter metadata (username, date, season)
# View calculated role and metrics

# Select option 3 - Compare players
# Enter player numbers (e.g., 1,2,3)
# View side-by-side comparison
```

## Version Info
- Version: 0.1
- Release Date: 2024-02-12
- Python Required: 3.7+
- Status: MVP (Minimum Viable Product)

## Contributing
This is currently a personal project. Suggestions welcome!

## Credits
- Rainbow Six Siege: Ubisoft
- R6 Tracker: tracker.gg
